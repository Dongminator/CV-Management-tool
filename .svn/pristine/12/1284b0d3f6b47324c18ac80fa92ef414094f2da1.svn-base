from base import BaseHandler

# For testing
import logging

class HomePageHandler(BaseHandler):
    def get(self):
        if self.logged_in:
            self.render('homepage.html',{'user':self.current_user})
        else:
            self.redirect('/')

    def post(self):
        if self.logged_in:
            user = self.current_user

            if self.request.get('cv') != '':
#                logging.info(str(self.request.get('cv')))
                user.cv = self.request.get('cv')
            
            if self.request.get('currcv') != '':
#                logging.info(str(self.request.get('currcv')))
                user.currcv = self.request.get('currcv')
            # Put to the Datastore
            user.put()
        else:
            self.redirect('/')
