import webapp2
from google.appengine.api import users


class MainPage(webapp2.RequestHandler):
    def get(self):
        
        # If the user is logged in
        #    then check if the uesr is a new user. 
        #        if yes, display new user registration
        if users.get_current_user():
            # TODO display normal page
            
            
            
            self.response.headers['Content-Type'] = 'text/plain'
            self.response.write('Hello, ' + users.get_current_user().nickname())
            
            
            
            # space to generate the web content
        else:
            self.redirect('/login')
#            self.redirect(users.create_login_url(self.request.uri))
    

app = webapp2.WSGIApplication(
                              [('/', MainPage)],
                              debug=True)


# Contain all the routing for the app

#config = {}

#app = webapp2.WSGIApplication(routes = [
#                               webapp2.Route('/', 'mainpage.mainpageHandler.MainPage'),
#                               webapp2.Route('/login/', 'login.loginHandler.LoginPage')],
#                              config = config
#                              )
# Appstat : cache for the application